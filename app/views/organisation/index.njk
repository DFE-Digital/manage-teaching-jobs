
{% extends "layout.njk" %}

{% set title = 'Organisation profile' %}

{% set primaryNavId = 'organisation' %}

{% block content %}

  {% set notificationBannerHtml %}
    <h2 class="govuk-heading-m">
      Information about your school is missing
    </h2>

    <div class="app-notification-banner-summary__body">
      <ul class="govuk-list app-notification-banner-summary__list">
        <li>
          <a href="#publish-date">Education phase is missing</a>
        </li>
        <li>
          <a href="#publish-date">Information about the school is missing</a>
        </li>
        <li>
          <a href="#publish-date">Information about how employees are supported is missing</a>
        </li>
        <li>
          <a href="#publish-date">Logo is missing</a>
        </li>
        <li>
          <a href="#publish-date">Photo is missing</a>
        </li>
      </ul>
    </div>

  {% endset %}

  {# {{ govukNotificationBanner({
    html: notificationBannerHtml
  }) }} #}

  {{ govukNotificationBanner({
    text: "Information about your school is missing"
  }) }}


  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-l">
        {{title}}
      </h1>

      {% if user.organisation.schools %}
        <p><a href="#">View organisation page (opens in new tab)</a></p>

        {% set address %}
          {% for part, value in user.organisation.address %}
            {{value}}{% if not loop.last %}, {% endif %}
          {% endfor %}
        {% endset %}

        {% set websiteUrl %}
          <a href="{{user.organisation.websiteUrl}}">{{user.organisation.websiteUrl}} (opens in new tab)</a>
        {% endset %}

        {% set logo %}
          {% if user.organisation.logo %}
            <img src="{{user.organisation.logo}}" alt="Logo" width="150">
          {% else %}
            <div class="app-field-highlight">
              <p class="app-field-highlight__instruction">Blah</p>
              Not entered
            </div>
          {% endif %}
        {% endset %}

        {% set photo %}
          {% if user.organisation.photo %}
            <img src="{{user.organisation.photo}}" alt="Photo" width="100%">
          {% else %}
            <div class="app-field-highlight">
              <p class="app-field-highlight__instruction">Blah</p>
              Not entered
            </div>
          {% endif %}
        {% endset %}


        {{ govukSummaryList({
          rows: [
            {
              key: {
                text: "Name"
              },
              value: {
                text: user.organisation.name
              }
            },
            {
              key: {
                text: "Type"
              },
              value: {
                text: 'Multi-academy trust'
              }
            },
            {
              key: {
                text: "Address"
              },
              value: {
                text: address
              }
            },
            {
              key: {
                text: "Website"
              },
              value: {
                html: websiteUrl
              },
              actions: {
                items: [
                  {
                    href: "Item URL",
                    text: "Change",
                    visuallyHiddenText: "Item label"
                  }
                ]
              }
            },
            {
              key: {
                text: "About school"
              },
              value: {
                html: user.organisation.about or 'Not entered'
              },
              actions: {
                items: [
                  {
                    href: "/organisation/edit/description",
                    text: "Change",
                    visuallyHiddenText: "About school"
                  }
                ]
              }
            },
            {
              key: {
                text: "How employees are supported"
              },
              value: {
                html: user.organisation.supportForEmployees or 'Not entered'
              },
              actions: {
                items: [
                  {
                    href: "/organisation/edit/description",
                    text: "Change",
                    visuallyHiddenText: "About school"
                  }
                ]
              }
            },
            {
                key: {
                  text: "Logo"
                },
                value: {
                  html: logo
                },
                actions: {
                  items: [
                    {
                      href: "/organisation/edit/logo",
                      text: "Change",
                      visuallyHiddenText: "About school"
                    }
                  ]
                }
              },
              {
                key: {
                  text: "Photo"
                },
                value: {
                  html: photo
                },
                actions: {
                  items: [
                    {
                      href: "/organisation/edit/photo",
                      text: "Change",
                      visuallyHiddenText: "About school"
                    }
                  ]
                }
              }
          ]
        }) }}

          <h2 class="govuk-heading-m">
            Schools
          </h2>

          {% for school in user.organisation.schools %}
            <div class="app-school govuk-!-margin-bottom-0">
              <h3 class="govuk-heading-s govuk-!-margin-bottom-0">
                <a href="/">{{school.name}}</a>
              </h3>

              {% if loop.index < 3 %}
                {# {{ govukTag({
                  text: "Incomplete",
                  classes: 'govuk-!-margin-left-1 govuk-tag--grey'
                }) }} #}
                {{ govukInsetText({
                  text: "This school is missing some information.",
                  classes: 'govuk-!-margin-top-2 govuk-!-margin-bottom-0'
                }) }}
              {% endif %}
            </div>


            {# <p><a href="#">View school page (opens in new tab)</a></p> #}
            {# {{appSchoolSummaryList({ school: school })}} #}
          {% endfor %}
      {% else %}
        <p><a href="#">View school page (opens in new tab)</a></p>
        {{appSchoolSummaryList({ school: user.organisation })}}
      {% endif %}









    </div>
  </div>

{% endblock %}
